---
import '../../styles/global.css';
import LPUserBehaviorTracker from '../../components/LPUserBehaviorTracker';
import MetaPixelTracker from '../../components/MetaPixelTracker';

const title = "KI-Automatisierung für KMU | Marco Heer | Synclaro";
const description = "In 180 Tagen setzt du KI so ein, dass sie dir wirklich Arbeit abnimmt. Lerne moderne KI-Tools sicher zu beherrschen.";
---

<!doctype html>
<html lang="de" class="dark scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>

    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://synclaro.de/lp/coaching" />

    <!-- Google Fonts: Inter & Space Grotesk for Tech/Modern feel -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">

    <style>
      :root {
        --swiss-orange: #FF4F00;
        --deep-bg: #030305;
        --glass-border: rgba(255, 255, 255, 0.08);
        --glass-bg: rgba(255, 255, 255, 0.03);
        --neon-glow: 0 0 40px rgba(255, 79, 0, 0.15);
      }

      body {
        font-family: 'Inter', sans-serif;
        background-color: var(--deep-bg);
        color: #e2e8f0;
        overflow-x: hidden;
      }

      h1, h2, h3, h4, h5, h6 {
        font-family: 'Space Grotesk', sans-serif;
      }

      /* Premium Gradients */
      .text-gradient {
        background: linear-gradient(135deg, #fff 30%, #a5a5a5 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .text-gradient-orange {
        background: linear-gradient(135deg, #FF4F00 0%, #FF8F00 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      /* Glassmorphism Utilities */
      .glass-panel {
        background: var(--glass-bg);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid var(--glass-border);
      }

      .glass-card {
        background: linear-gradient(180deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.05);
        box-shadow: 0 4px 20px rgba(0,0,0,0.2);
      }

      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #0a0a0a;
      }
      ::-webkit-scrollbar-thumb {
        background: #333;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: var(--swiss-orange);
      }

      /* Sticky Mobile Button Animation */
      @keyframes slideUp {
        from { transform: translateY(100%); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
      }
      .sticky-btn-appear {
        animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
      }
    </style>
  </head>

  <body class="min-h-screen bg-[#030305] text-slate-200 overflow-x-hidden selection:bg-swiss-orange/30 selection:text-white">

    <!-- ============================================
         HERO SECTION - OUTCOME FIRST (Chef-KI Vorgabe)
         Prinzip: Outcome → Proof → Action → KEIN PREIS
         ============================================ -->
    <!-- ============================================
         HERO SECTION - OUTCOME FIRST
         ============================================ -->
    <section class="relative min-h-[100svh] flex items-center justify-center overflow-hidden pt-20 sm:pt-0">

      <!-- Premium Background Effects -->
      <div class="absolute inset-0 bg-[#030305]"></div>
      
      <!-- Animated Glow Orbs -->
      <div class="absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-swiss-orange/20 rounded-full blur-[120px] opacity-40 animate-pulse"></div>
      <div class="absolute bottom-[10%] right-[-10%] w-[600px] h-[600px] bg-blue-600/10 rounded-full blur-[120px] opacity-30"></div>
      
      <!-- Grid Overlay -->
      <div class="absolute inset-0 opacity-20" 
           style="background-image: linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px); background-size: 50px 50px;">
      </div>

      <!-- Main Content -->
      <div class="relative z-10 container mx-auto px-5 py-8 sm:py-12">

        <!-- MOBILE HERO (Optimized for High Conversion & App-Feel) -->
        <div class="sm:hidden text-left max-w-lg mx-auto flex flex-col h-full justify-center">

          <!-- Trust Badge -->
          <div class="mb-6 inline-flex items-center gap-2 px-3 py-1.5 rounded-full glass-panel border-swiss-orange/20">
            <span class="relative flex h-2 w-2">
              <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-swiss-orange opacity-75"></span>
              <span class="relative inline-flex rounded-full h-2 w-2 bg-swiss-orange"></span>
            </span>
            <span class="text-[11px] font-medium tracking-wide uppercase text-gray-300">Live Ausbildung 2026</span>
          </div>

          <!-- HEADLINE - Massive & Impactful -->
          <h1 class="text-[2.25rem] font-bold leading-[1.1] tracking-tight mb-6 text-white font-space">
            Verstehe KI.<br/>
            <span class="text-gradient-orange">Beherrsche es.</span><br/>
            <span class="text-gray-500 font-normal text-3xl">Wende es an.</span>
          </h1>

          <!-- Value Proposition -->
          <p class="text-gray-400 text-lg leading-relaxed mb-8">
            Eine Ausbildung, die dir <span class="text-white font-medium border-b border-swiss-orange/50">wirklich erklärt</span>, wie man KI im Unternehmen implementiert. Ohne Hype.
          </p>

          <!-- Glass Card: Marco -->
          <div class="mb-8 p-4 glass-card rounded-2xl flex items-center gap-4 border-l-4 border-l-swiss-orange">
            <div class="relative">
              <img src="/images/marco_new.png" alt="Marco Heer" class="w-14 h-14 rounded-full object-cover border-2 border-white/10" />
              <div class="absolute -bottom-1 -right-1 bg-swiss-orange text-[10px] font-bold px-1.5 py-0.5 rounded text-white">#1</div>
            </div>
            <div>
              <p class="text-white font-bold text-sm">Marco Heer</p>
              <p class="text-gray-400 text-xs">Dein Mentor & Ingenieur</p>
            </div>
             <div class="ml-auto">
               <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
             </div>
          </div>

          <!-- Benefits Chips -->
          <div class="flex flex-wrap gap-2 mb-8">
            <span class="px-3 py-1.5 glass-panel rounded-full text-xs text-gray-300 flex items-center gap-1.5">
              <svg class="w-3 h-3 text-swiss-orange" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              Websites bauen
            </span>
            <span class="px-3 py-1.5 glass-panel rounded-full text-xs text-gray-300 flex items-center gap-1.5">
              <svg class="w-3 h-3 text-swiss-orange" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              Automatisierung
            </span>
            <span class="px-3 py-1.5 glass-panel rounded-full text-xs text-gray-300 flex items-center gap-1.5">
              <svg class="w-3 h-3 text-swiss-orange" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
              Recherche
            </span>
          </div>

          <!-- Primary CTA (Mobile) -->
          <button
            id="open-modal-hero-mobile"
            class="w-full relative overflow-hidden group bg-white text-black font-bold py-4 rounded-xl transition-all duration-300 active:scale-[0.98] hover:shadow-[0_0_20px_rgba(255,255,255,0.3)]"
          >
            <div class="absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/50 to-transparent -translate-x-full group-hover:animate-[shimmer_1.5s_infinite]"></div>
            <span class="flex items-center justify-center gap-2 text-lg">
              Jetzt bewerben
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>
            </span>
          </button>
           <p class="text-center text-xs text-gray-500 mt-3 flex items-center justify-center gap-1">
            <span class="w-1.5 h-1.5 rounded-full bg-green-500"></span>
            2-3 Minuten · Unverbindlich
          </p>

        </div>

        <!-- DESKTOP HERO -->
        <div class="hidden sm:block max-w-7xl mx-auto">
          <div class="grid lg:grid-cols-[1.2fr,0.8fr] gap-16 items-center">
            
            <!-- LEFT: Content -->
            <div class="text-left relative">
              <div class="absolute -left-20 -top-20 w-40 h-40 bg-swiss-orange/20 blur-[80px]"></div>
              
              <h1 class="text-6xl lg:text-[5rem] font-bold leading-[1.05] tracking-tight mb-8 text-white font-space">
                Verstehe KI.<br/>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-swiss-orange to-orange-400">Beherrsche es.</span>
              </h1>
              
              <p class="text-xl text-gray-400 mb-10 max-w-xl leading-relaxed">
                Schluss mit oberflächlichem Wissen. Lerne in 180 Tagen, wie du KI-Tools und Automatisierung <span class="text-white">wirklich</span> in deinem Unternehmen einsetzt.
              </p>

              <!-- Stats / Proof -->
              <div class="grid grid-cols-3 gap-6 mb-12 border-t border-white/10 pt-8 max-w-2xl">
                <div>
                  <p class="text-3xl font-bold text-white font-space">180</p>
                  <p class="text-sm text-gray-500 uppercase tracking-wider mt-1">Tage Begleitung</p>
                </div>
                <div>
                  <p class="text-3xl font-bold text-white font-space">1:1</p>
                  <p class="text-sm text-gray-500 uppercase tracking-wider mt-1">Mentoring</p>
                </div>
                <div>
                  <p class="text-3xl font-bold text-white font-space">∞ zukunft</p>
                  <p class="text-sm text-gray-500 uppercase tracking-wider mt-1">Fähigkeiten</p>
                </div>
              </div>

               <button
                  id="open-modal-hero"
                  class="group relative inline-flex items-center gap-4 bg-white text-black font-bold py-5 px-10 text-xl rounded-full transition-all hover:scale-[1.02] hover:shadow-[0_0_40px_rgba(255,255,255,0.2)]"
                >
                  <span>Jetzt bewerben</span>
                  <div class="w-10 h-10 bg-black rounded-full flex items-center justify-center text-white transition-transform group-hover:translate-x-1">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/></svg>
                  </div>
                </button>
            </div>

            <!-- RIGHT: Visual -->
            <div class="relative">
              <div class="relative z-10 glass-card rounded-[2rem] p-2 border border-white/10 overflow-hidden transform rotate-[-2deg] transition-transform hover:rotate-0 duration-500">
                <img src="/images/marco_new.png" alt="Marco Heer" class="w-full h-auto rounded-[1.8rem] contrast-125 saturate-0 hover:saturate-100 transition-all duration-700" />
                
                <!-- Floating Badge -->
                <div class="absolute bottom-8 left-8 right-8 glass-panel p-6 rounded-xl backdrop-blur-xl border border-white/20">
                  <p class="text-white font-space text-lg font-bold">"Transformation entsteht durch Tun, nicht durch Reden."</p>
                  <div class="flex items-center gap-2 mt-3">
                     <span class="w-2 h-2 rounded-full bg-swiss-orange"></span>
                     <p class="text-xs text-gray-400 uppercase tracking-widest">Marco Heer · KI Experte</p>
                  </div>
                </div>
              </div>
              
              <!-- Background Elements -->
              <div class="absolute -right-10 -bottom-10 w-full h-full border-2 border-swiss-orange/20 rounded-[2rem] -z-10 translate-x-4 translate-y-4"></div>
            </div>

          </div>
        </div>

      </div>
    </section>


    <!-- ============================================
         SOCIAL PROOF SECTION - PROMINENT (Chef-KI Vorgabe)
         Kommt DIREKT nach Hero, BEVOR irgendwelche Details
         ============================================ -->
    <!-- ============================================
         SOCIAL PROOF SECTION
         ============================================ -->
    <section class="relative py-20 bg-[#030305] overflow-hidden">

      <!-- Background Glow -->
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[400px] bg-swiss-orange/5 rounded-full blur-[100px]"></div>

      <div class="container mx-auto px-5 sm:px-6 relative z-10">

        <!-- Section Header -->
        <div class="text-center mb-12">
          <h2 class="text-3xl sm:text-4xl font-bold mb-3 text-white font-space">
            Was Teilnehmer <span class="text-gradient-orange">berichten</span>
          </h2>
          <p class="text-gray-500 text-sm sm:text-base">Echte Ergebnisse. Keine Fake-Reviews.</p>
        </div>

        <!-- Mobile: Horizontal Scroll Snap | Desktop: Grid -->
        <div class="flex sm:grid sm:grid-cols-2 gap-4 overflow-x-auto sm:overflow-visible snap-x snap-mandatory pb-8 sm:pb-0 -mx-5 px-5 sm:mx-0 sm:px-0 scrollbar-hide">

          <!-- Testimonial 1 -->
          <div class="min-w-[85vw] sm:min-w-0 snap-center glass-panel p-6 rounded-2xl border-l-[3px] border-l-swiss-orange relative group hover:bg-white/5 transition-colors">
            <div class="absolute top-6 right-6 text-swiss-orange/20 group-hover:text-swiss-orange/40 transition-colors">
              <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M14.017 21L14.017 18C14.017 16.8954 14.9124 16 16.017 16H19.017C19.5693 16 20.017 15.5523 20.017 15V9C20.017 8.44772 19.5693 8 19.017 8H15.017C14.4647 8 14.017 8.44772 14.017 9V11C14.017 11.5523 13.5693 12 13.017 12H12.017V5H22.017V15C22.017 18.3137 19.3307 21 16.017 21H14.017ZM5.0166 21L5.0166 18C5.0166 16.8954 5.91203 16 7.0166 16H10.0166C10.5689 16 11.0166 15.5523 11.0166 15V9C11.0166 8.44772 10.5689 8 10.0166 8H6.0166C5.46432 8 5.0166 8.44772 5.0166 9V11C5.0166 11.5523 4.56889 12 4.0166 12H3.0166V5H13.0166V15C13.0166 18.3137 10.3303 21 7.0166 21H5.0166Z"></path></svg>
            </div>
            <div class="flex items-center gap-3 mb-4">
              <div class="w-10 h-10 rounded-full bg-gradient-to-br from-gray-700 to-gray-900 flex items-center justify-center text-sm font-bold border border-white/10 text-white">K</div>
              <div>
                <p class="font-bold text-white text-sm">Karl</p>
                <p class="text-[11px] text-gray-500 uppercase tracking-wide">Handwerk</p>
              </div>
            </div>
            <p class="text-gray-300 text-sm leading-relaxed mb-4">
              „Das KI-Potenzial war mir klar. Aber nicht, dass ich damit plötzlich <span class="text-white font-medium">500% mehr selbst machen kann</span>."
            </p>
            <div class="flex gap-2">
              <span class="px-2 py-1 rounded bg-swiss-orange/10 border border-swiss-orange/20 text-swiss-orange text-[10px] uppercase font-bold tracking-wide">500% Output</span>
            </div>
          </div>

          <!-- Testimonial 2 -->
          <div class="min-w-[85vw] sm:min-w-0 snap-center glass-panel p-6 rounded-2xl border-l-[3px] border-l-purple-500 relative group hover:bg-white/5 transition-colors">
             <div class="absolute top-6 right-6 text-purple-500/20 group-hover:text-purple-500/40 transition-colors">
              <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M14.017 21L14.017 18C14.017 16.8954 14.9124 16 16.017 16H19.017C19.5693 16 20.017 15.5523 20.017 15V9C20.017 8.44772 19.5693 8 19.017 8H15.017C14.4647 8 14.017 8.44772 14.017 9V11C14.017 11.5523 13.5693 12 13.017 12H12.017V5H22.017V15C22.017 18.3137 19.3307 21 16.017 21H14.017ZM5.0166 21L5.0166 18C5.0166 16.8954 5.91203 16 7.0166 16H10.0166C10.5689 16 11.0166 15.5523 11.0166 15V9C11.0166 8.44772 10.5689 8 10.0166 8H6.0166C5.46432 8 5.0166 8.44772 5.0166 9V11C5.0166 11.5523 4.56889 12 4.0166 12H3.0166V5H13.0166V15C13.0166 18.3137 10.3303 21 7.0166 21H5.0166Z"></path></svg>
            </div>
            <div class="flex items-center gap-3 mb-4">
              <div class="w-10 h-10 rounded-full bg-gradient-to-br from-gray-700 to-gray-900 flex items-center justify-center text-sm font-bold border border-white/10 text-white">D</div>
              <div>
                <p class="font-bold text-white text-sm">Daniela</p>
                <p class="text-[11px] text-gray-500 uppercase tracking-wide">Bauwesen</p>
              </div>
            </div>
            <p class="text-gray-300 text-sm leading-relaxed mb-4">
              „KI analysiert Daten, <span class="text-white font-medium">schreibt Rechnungen</span>. Ich wusste nicht, dass die Welt schon so weit ist."
            </p>
            <div class="flex gap-2">
              <span class="px-2 py-1 rounded bg-purple-500/10 border border-purple-500/20 text-purple-400 text-[10px] uppercase font-bold tracking-wide">ERP Integration</span>
            </div>
          </div>

          <!-- Testimonial 3 -->
           <div class="min-w-[85vw] sm:min-w-0 snap-center glass-panel p-6 rounded-2xl border-l-[3px] border-l-blue-500 relative group hover:bg-white/5 transition-colors">
            <div class="flex items-center gap-3 mb-4">
              <div class="w-10 h-10 rounded-full bg-gradient-to-br from-gray-700 to-gray-900 flex items-center justify-center text-sm font-bold border border-white/10 text-white">E</div>
              <div>
                <p class="font-bold text-white text-sm">Evelyn</p>
                <p class="text-[11px] text-gray-500 uppercase tracking-wide">Selbstständig</p>
              </div>
            </div>
            <p class="text-gray-300 text-sm leading-relaxed mb-4">
              „Ich war vorher ein gefangener Selbstständiger. <span class="text-white font-medium">So frei habe ich mich schon lang nicht mehr gefühlt</span>."
            </p>
            <div class="flex gap-2">
              <span class="px-2 py-1 rounded bg-blue-500/10 border border-blue-500/20 text-blue-400 text-[10px] uppercase font-bold tracking-wide">Freiheit</span>
            </div>
          </div>

           <!-- Testimonial 4 -->
           <div class="min-w-[85vw] sm:min-w-0 snap-center glass-panel p-6 rounded-2xl border-l-[3px] border-l-amber-500 relative group hover:bg-white/5 transition-colors">
            <div class="flex items-center gap-3 mb-4">
              <div class="w-10 h-10 rounded-full bg-gradient-to-br from-gray-700 to-gray-900 flex items-center justify-center text-sm font-bold border border-white/10 text-white">H</div>
              <div>
                <p class="font-bold text-white text-sm">Holger</p>
                <p class="text-[11px] text-gray-500 uppercase tracking-wide">Bauunternehmer</p>
              </div>
            </div>
            <p class="text-gray-300 text-sm leading-relaxed mb-4">
              „Ich habe jetzt <span class="text-white font-medium">vier KI-Integrationen</span> umgesetzt, die meinen Bauingenieuren täglich 90 Minuten sparen."
            </p>
            <div class="flex gap-2">
              <span class="px-2 py-1 rounded bg-amber-500/10 border border-amber-500/20 text-amber-400 text-[10px] uppercase font-bold tracking-wide">90 Min/Tag</span>
            </div>
          </div>

        </div>
        
        <!-- Mobile Swipe Hint -->
        <div class="sm:hidden flex justify-center mt-4 gap-1">
          <div class="w-1.5 h-1.5 rounded-full bg-swiss-orange"></div>
          <div class="w-1.5 h-1.5 rounded-full bg-gray-700"></div>
          <div class="w-1.5 h-1.5 rounded-full bg-gray-700"></div>
          <div class="w-1.5 h-1.5 rounded-full bg-gray-700"></div>
        </div>

      </div>
    </section>


    <!-- ============================================
         TRANSFORMATION SECTION - Was du erreichen wirst
         ============================================ -->
    <!-- ============================================
         TRANSFORMATION SECTION
         ============================================ -->
    <section class="relative py-24 bg-[#030305] overflow-hidden">
      
      <!-- Gradient Line -->
      <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"></div>

      <div class="container mx-auto px-5 sm:px-6 max-w-6xl relative z-10">

        <!-- Section Header -->
        <div class="text-center mb-16">
          <span class="inline-block px-3 py-1.5 rounded-full bg-swiss-orange/10 border border-swiss-orange/30 text-swiss-orange text-[10px] tracking-widest uppercase mb-4">
            Die Transformation
          </span>
          <h2 class="text-3xl sm:text-5xl font-bold mb-4 text-white font-space">
            Was du <span class="text-gradient-orange">erreichst</span>
          </h2>
          <p class="text-gray-400 text-sm sm:text-base max-w-xl mx-auto">
            Keine Theorie. Echte Ergebnisse für dein Business.
          </p>
        </div>

        <!-- Transformation Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

          <!-- Card 1 -->
          <div class="group relative glass-panel p-8 rounded-3xl hover:border-swiss-orange/50 transition-colors duration-500">
            <div class="absolute inset-0 bg-gradient-to-br from-swiss-orange/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-3xl"></div>
            <div class="relative z-10 flex gap-6">
              <div class="w-14 h-14 rounded-2xl bg-[#0a0a0a] border border-white/10 flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-500 group-hover:border-swiss-orange/50 group-hover:shadow-[0_0_20px_rgba(255,79,0,0.2)]">
                <svg class="w-7 h-7 text-swiss-orange" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
              </div>
              <div>
                <h3 class="font-bold text-xl mb-2 text-white font-space">80% weniger Routine</h3>
                <p class="text-gray-400 text-sm leading-relaxed">KI übernimmt deine administrativen und wiederkehrenden Aufgaben. Du gewinnst Zeit für Strategie.</p>
              </div>
            </div>
          </div>

          <!-- Card 2 -->
          <div class="group relative glass-panel p-8 rounded-3xl hover:border-blue-500/50 transition-colors duration-500">
            <div class="absolute inset-0 bg-gradient-to-br from-blue-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-3xl"></div>
            <div class="relative z-10 flex gap-6">
               <div class="w-14 h-14 rounded-2xl bg-[#0a0a0a] border border-white/10 flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-500 group-hover:border-blue-500/50 group-hover:shadow-[0_0_20px_rgba(59,130,246,0.2)]">
                <svg class="w-7 h-7 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
              </div>
              <div>
                <h3 class="font-bold text-xl mb-2 text-white font-space">Unabhängigkeit</h3>
                <p class="text-gray-400 text-sm leading-relaxed">Du baust und wartest deine Automatisierungen selbst. Keine teuren Agenturen mehr nötig.</p>
              </div>
            </div>
          </div>

          <!-- Card 3 -->
          <div class="group relative glass-panel p-8 rounded-3xl hover:border-purple-500/50 transition-colors duration-500">
            <div class="absolute inset-0 bg-gradient-to-br from-purple-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-3xl"></div>
            <div class="relative z-10 flex gap-6">
               <div class="w-14 h-14 rounded-2xl bg-[#0a0a0a] border border-white/10 flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-500 group-hover:border-purple-500/50 group-hover:shadow-[0_0_20px_rgba(168,85,247,0.2)]">
                <svg class="w-7 h-7 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>
              </div>
              <div>
                <h3 class="font-bold text-xl mb-2 text-white font-space">Vollständige Integration</h3>
                <p class="text-gray-400 text-sm leading-relaxed">KI greift auf deine bestehenden Tools zu (ERP, CRM, Mail). Kein Systemwechsel nötig.</p>
              </div>
            </div>
          </div>

           <!-- Card 4 -->
          <div class="group relative glass-panel p-8 rounded-3xl hover:border-green-500/50 transition-colors duration-500">
            <div class="absolute inset-0 bg-gradient-to-br from-green-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-3xl"></div>
            <div class="relative z-10 flex gap-6">
               <div class="w-14 h-14 rounded-2xl bg-[#0a0a0a] border border-white/10 flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-500 group-hover:border-green-500/50 group-hover:shadow-[0_0_20px_rgba(34,197,94,0.2)]">
                <svg class="w-7 h-7 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
              </div>
              <div>
                <h3 class="font-bold text-xl mb-2 text-white font-space">Zeitgewinn sofort</h3>
                <p class="text-gray-400 text-sm leading-relaxed">Erste Ergebnisse nicht erst nach Monaten, sondern nach den ersten Live-Sessions.</p>
              </div>
            </div>
          </div>

        </div>

      </div>
    </section>


    <!-- ============================================
         PROCESS SECTION - TIMELINE
         ============================================ -->
    <section class="relative py-24 bg-[#050507] overflow-hidden">
      
      <!-- Gradient Line -->
      <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-white/5 to-transparent"></div>

      <div class="container mx-auto px-5 sm:px-6 max-w-4xl relative z-10">

        <!-- Section Header -->
        <div class="text-center mb-20">
          <h2 class="text-3xl sm:text-5xl font-bold mb-4 text-white font-space">
            So läuft es ab
          </h2>
          <p class="text-gray-500">Dein Weg zur KI-Kompetenz</p>
        </div>

        <!-- Timeline Steps -->
        <div class="relative space-y-12 sm:space-y-20 before:absolute before:inset-0 before:left-[19px] sm:before:left-1/2 before:w-[2px] before:-translate-x-1/2 before:bg-gradient-to-b before:from-swiss-orange before:via-gray-800 before:to-gray-900 before:h-full">
          
          <!-- Step 1 -->
          <div class="relative flex flex-col sm:flex-row items-start sm:items-center gap-6 sm:gap-12 group">
            <div class="sm:w-1/2 sm:text-right order-2 sm:order-1 sm:pr-8">
              <h3 class="text-xl font-bold text-white mb-2 group-hover:text-swiss-orange transition-colors">1. Kennenlernen (15 Min.)</h3>
              <p class="text-gray-400 text-sm">Prüfung ob es passt. Wenn ja, besprechen wir den Fahrplan. Unverbindlich.</p>
            </div>
            <div class="absolute left-0 sm:left-1/2 w-10 h-10 -translate-x-1 sm:-translate-x-1/2 rounded-full bg-[#050507] border-4 border-swiss-orange z-10 flex items-center justify-center order-1 text-white font-bold text-xs shadow-[0_0_20px_rgba(255,79,0,0.4)]">1</div>
            <div class="sm:w-1/2 order-3 sm:pl-8"></div>
          </div>

           <!-- Step 2 -->
          <div class="relative flex flex-col sm:flex-row items-start sm:items-center gap-6 sm:gap-12 group">
            <div class="sm:w-1/2 order-3 sm:order-1"></div>
            <div class="absolute left-0 sm:left-1/2 w-10 h-10 -translate-x-1 sm:-translate-x-1/2 rounded-full bg-[#050507] border-4 border-gray-800 group-hover:border-swiss-orange transition-colors z-10 flex items-center justify-center order-1 text-gray-500 group-hover:text-white font-bold text-xs">2</div>
            <div class="sm:w-1/2 order-2 sm:pl-8">
              <h3 class="text-xl font-bold text-white mb-2 group-hover:text-swiss-orange transition-colors">2. Live-Sessions (Weekly)</h3>
              <p class="text-gray-400 text-sm">Wöchentlich 2 Stunden Deep Dive. Echte Projekte, kein Bullshit-Bingo.</p>
            </div>
          </div>

           <!-- Step 3 -->
          <div class="relative flex flex-col sm:flex-row items-start sm:items-center gap-6 sm:gap-12 group">
            <div class="sm:w-1/2 sm:text-right order-2 sm:order-1 sm:pr-8">
              <h3 class="text-xl font-bold text-white mb-2 group-hover:text-swiss-orange transition-colors">3. 1:1 Begleitung</h3>
              <p class="text-gray-400 text-sm">Persönlicher Support für deine spezifischen Unternehmens-Herausforderungen.</p>
            </div>
            <div class="absolute left-0 sm:left-1/2 w-10 h-10 -translate-x-1 sm:-translate-x-1/2 rounded-full bg-[#050507] border-4 border-gray-800 group-hover:border-swiss-orange transition-colors z-10 flex items-center justify-center order-1 text-gray-500 group-hover:text-white font-bold text-xs">3</div>
            <div class="sm:w-1/2 order-3 sm:pl-8"></div>
          </div>

           <!-- Step 4 -->
          <div class="relative flex flex-col sm:flex-row items-start sm:items-center gap-6 sm:gap-12 group">
             <div class="sm:w-1/2 order-3 sm:order-1"></div>
            <div class="absolute left-0 sm:left-1/2 w-10 h-10 -translate-x-1 sm:-translate-x-1/2 rounded-full bg-[#050507] border-4 border-gray-800 group-hover:border-swiss-orange transition-colors z-10 flex items-center justify-center order-1 text-gray-500 group-hover:text-white font-bold text-xs">4</div>
            <div class="sm:w-1/2 order-2 sm:pl-8">
              <h3 class="text-xl font-bold text-white mb-2 group-hover:text-swiss-orange transition-colors">4. Ergebnis</h3>
              <p class="text-gray-400 text-sm">Dauerhafte Automatisierung und das Wissen, es selbst zu erweitern.</p>
            </div>
          </div>

        </div>

      </div>
    </section>


    <!-- ============================================
         ÜBER MARCO SECTION
         ============================================ -->
    <!-- ============================================
         ÜBER MARCO SECTION
         ============================================ -->
    <section class="relative py-16 sm:py-24 lg:py-32 bg-[#0a0a0a] overflow-hidden">

      <!-- Background Elements -->
      <div class="absolute top-0 right-0 w-[500px] h-[500px] bg-swiss-orange/5 rounded-full blur-[120px] pointer-events-none"></div>
      <div class="absolute bottom-0 left-0 w-[500px] h-[500px] bg-blue-500/5 rounded-full blur-[120px] pointer-events-none"></div>

      <div class="container mx-auto px-5 sm:px-6 lg:px-12 max-w-7xl relative z-10">

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 sm:gap-12 lg:gap-16 items-center">

          <!-- Text Content -->
          <div class="order-2 lg:order-1">
            <span class="inline-block px-3 sm:px-4 py-2 bg-swiss-orange/10 border border-swiss-orange/30 text-swiss-orange font-mono text-[10px] sm:text-xs tracking-[0.2em] sm:tracking-[0.3em] uppercase mb-4 sm:mb-6 rounded-full backdrop-blur-sm">
              Über Marco
            </span>
            <h2 class="text-2xl sm:text-3xl md:text-5xl font-black mb-6 sm:mb-8 text-white leading-tight">
              Vom Vertriebsleiter zum <br class="hidden sm:block" /> <span class="bg-clip-text text-transparent bg-gradient-to-r from-swiss-orange via-orange-400 to-amber-300">KI-Projektleiter</span>
            </h2>

            <div class="space-y-4 sm:space-y-6 text-gray-400 text-base sm:text-lg leading-relaxed">
              <p>
                Ich entstamme nicht der IT-Welt. Ich habe Luft- und Raumfahrttechnik studiert, dann Wirtschaftsingenieurwesen abgeschlossen. Danach drei Jahre als Cyber Security Specialist im Vertrieb bei Cisco Systems, dann in der Vertriebsleitung. Dort habe ich KI und Automatisierung für mich entdeckt – nicht aus Spielerei, sondern aus echtem Bedarf.
              </p>
              <p>
                Nach hunderten Nächten, gescheiterten und erfolgreichen Projekten, ist eine Erkenntnis gereift: KI ist der größte Zugewinn meines wirtschaftlichen Lebens. Und ich habe das Skill-Set eines Projektleiters entwickelt, der ganze Schwärme von Agenten orchestriert.
              </p>
              <p>
                Jetzt gebe ich dieses Wissen weiter. Mit der Leidenschaft eines Lehrers, der Direktheit eines Vertrieblers und der Positivität eines Menschen, in dessen Welt es keine Sätze gibt wie <span class="text-white font-medium">"Das geht nicht"</span> oder <span class="text-white font-medium">"Steht in keinem Verhältnis"</span>.
              </p>
            </div>

            <div class="flex flex-wrap gap-3 sm:gap-6 mt-6 sm:mt-10">
              <div class="bg-white/5 border border-white/10 px-4 sm:px-6 py-3 sm:py-4 rounded-xl backdrop-blur-sm hover:border-swiss-orange/30 transition-colors">
                <p class="font-mono text-[10px] sm:text-xs text-spanish-gray mb-1">Abschluss</p>
                <p class="font-bold text-sm sm:text-base text-white">Wirtschaftsingenieur</p>
              </div>
              <div class="bg-white/5 border border-white/10 px-4 sm:px-6 py-3 sm:py-4 rounded-xl backdrop-blur-sm hover:border-swiss-orange/30 transition-colors">
                <p class="font-mono text-[10px] sm:text-xs text-spanish-gray mb-1">Hintergrund</p>
                <p class="font-bold text-sm sm:text-base text-white">Ingenieur, Unternehmer</p>
              </div>
              <div class="bg-white/5 border border-white/10 px-4 sm:px-6 py-3 sm:py-4 rounded-xl backdrop-blur-sm hover:border-swiss-orange/30 transition-colors">
                <p class="font-mono text-[10px] sm:text-xs text-spanish-gray mb-1">KI-Erfahrung</p>
                <p class="font-bold text-sm sm:text-base text-white">3+ Jahre Praxis</p>
              </div>
            </div>
          </div>

          <!-- Visual Element -->
          <div class="relative order-1 lg:order-2">
            <!-- Marco Image -->
            <div class="relative overflow-hidden rounded-2xl border border-white/10 bg-[#111]">
              <div class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-[#0a0a0a] z-10 opacity-80"></div>
              <img
                src="/images/marco_new.png"
                alt="Marco Heer"
                class="w-full h-auto max-h-[500px] object-cover object-top grayscale-[20%] contrast-[1.1]"
              />
              
              <!-- Gradient Overlay for blending -->
              <div class="absolute inset-0 bg-gradient-to-t from-[#0a0a0a] via-transparent to-transparent z-10"></div>
              <div class="absolute inset-0 bg-swiss-orange/10 mix-blend-overlay z-10"></div>

              <!-- Name Tag -->
              <div class="absolute bottom-6 left-6 right-6 z-20">
                <div class="flex items-center gap-4 bg-white/10 backdrop-blur-md border border-white/20 p-4 rounded-xl shadow-2xl">
                  <div class="w-1.5 h-12 bg-swiss-orange rounded-full shadow-[0_0_15px_rgba(255,79,0,0.6)]"></div>
                  <div>
                    <p class="font-black text-xl text-white">Marco Heer</p>
                    <p class="text-gray-300 font-mono text-xs tracking-wide">Unternehmer, Ingenieur & Coach</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Story Timeline (Desktop only) -->
            <div class="hidden lg:block mt-6 bg-white/5 border border-white/10 p-6 rounded-xl backdrop-blur-sm">
              <div class="space-y-5">
                <div class="flex items-center gap-4 group">
                  <div class="w-3 h-3 bg-gray-700 rounded-full flex-shrink-0 group-hover:bg-swiss-orange transition-colors"></div>
                  <p class="text-gray-400 text-sm group-hover:text-white transition-colors"><span class="text-swiss-orange font-mono text-xs mr-3 opacity-50 group-hover:opacity-100">01</span>Studium & Ingenieurswesen</p>
                </div>
                <div class="flex items-center gap-4 group">
                  <div class="w-3 h-3 bg-gray-700 rounded-full flex-shrink-0 group-hover:bg-swiss-orange transition-colors"></div>
                  <p class="text-gray-400 text-sm group-hover:text-white transition-colors"><span class="text-swiss-orange font-mono text-xs mr-3 opacity-50 group-hover:opacity-100">02</span>Vertriebsleitung & Führung</p>
                </div>
                <div class="flex items-center gap-4 group">
                  <div class="w-3 h-3 bg-gray-700 rounded-full flex-shrink-0 group-hover:bg-swiss-orange transition-colors"></div>
                  <p class="text-gray-400 text-sm group-hover:text-white transition-colors"><span class="text-swiss-orange font-mono text-xs mr-3 opacity-50 group-hover:opacity-100">03</span>Entdeckung: KI & Automatisierung</p>
                </div>
                <div class="flex items-center gap-4 group">
                  <div class="w-3 h-3 bg-swiss-orange rounded-full flex-shrink-0 shadow-[0_0_10px_rgba(255,79,0,0.5)] animate-pulse"></div>
                  <p class="text-white font-bold text-sm"><span class="text-swiss-orange font-mono text-xs mr-3">→</span>Heute: Coach & Möglichmacher</p>
                </div>
              </div>
            </div>
          </div>

        </div>

      </div>
    </section>


    <!-- ============================================
         ANGEBOT + PREIS SECTION (Chef-KI: Preis erst hier!)
         Nach: Transformation, Social Proof, Über Marco
         ============================================ -->
    <section class="relative py-16 sm:py-24 overflow-hidden" style="background: linear-gradient(180deg, #0a0a0a 0%, #1a0d05 50%, #0a0a0a 100%);">

      <!-- Background Glow -->
      <div class="absolute inset-0">
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-gradient-radial from-swiss-orange/10 to-transparent rounded-full blur-3xl"></div>
      </div>

      <div class="container mx-auto px-5 sm:px-6 max-w-4xl relative z-10">

        <!-- Section Header -->
        <div class="text-center mb-10 sm:mb-12">
          <span class="inline-block px-4 py-2 bg-swiss-orange/10 border border-swiss-orange/30 text-swiss-orange text-xs tracking-widest uppercase mb-5 font-semibold">
            Das Angebot
          </span>
          <h2 class="text-3xl sm:text-4xl md:text-5xl font-black mb-5 text-white">
            6 Monate Intensiv-Begleitung
          </h2>
          <p class="text-gray-400 text-base sm:text-lg max-w-xl mx-auto leading-relaxed">
            Alles, was du brauchst, um KI in deinem Unternehmen produktiv einzusetzen.
          </p>
        </div>

        <!-- Offer Box -->
        <div class="relative bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl p-8 sm:p-10 mb-8 overflow-hidden group">
          
          <!-- Glossy effect -->
          <div class="absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"></div>
          <div class="absolute top-0 right-0 w-64 h-64 bg-swiss-orange/10 rounded-full blur-[80px] -translate-y-1/2 translate-x-1/2"></div>
          
          <div class="relative z-10">
            <h3 class="text-xl sm:text-2xl font-bold mb-8 text-center text-white">Im Paket enthalten:</h3>
  
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-5 mb-10">
              <div class="flex items-center gap-4 p-4 bg-black/40 border border-white/5 rounded-xl hover:border-swiss-orange/30 transition-all hover:bg-swiss-orange/5 group/item">
                <span class="w-8 h-8 bg-swiss-orange/20 text-swiss-orange rounded-full flex items-center justify-center font-bold text-sm shadow-[0_0_10px_rgba(255,79,0,0.2)]">✓</span>
                <span class="text-base sm:text-lg text-gray-200 group-hover/item:text-white transition-colors">6 Monate Begleitung</span>
              </div>
              <div class="flex items-center gap-4 p-4 bg-black/40 border border-white/5 rounded-xl hover:border-swiss-orange/30 transition-all hover:bg-swiss-orange/5 group/item">
                <span class="w-8 h-8 bg-swiss-orange/20 text-swiss-orange rounded-full flex items-center justify-center font-bold text-sm shadow-[0_0_10px_rgba(255,79,0,0.2)]">✓</span>
                <span class="text-base sm:text-lg text-gray-200 group-hover/item:text-white transition-colors">Wöchentliche Live-Sessions (2h)</span>
              </div>
              <div class="flex items-center gap-4 p-4 bg-black/40 border border-white/5 rounded-xl hover:border-swiss-orange/30 transition-all hover:bg-swiss-orange/5 group/item">
                <span class="w-8 h-8 bg-swiss-orange/20 text-swiss-orange rounded-full flex items-center justify-center font-bold text-sm shadow-[0_0_10px_rgba(255,79,0,0.2)]">✓</span>
                <span class="text-base sm:text-lg text-gray-200 group-hover/item:text-white transition-colors">4 Stunden 1:1 mit Marco</span>
              </div>
              <div class="flex items-center gap-4 p-4 bg-black/40 border border-white/5 rounded-xl hover:border-swiss-orange/30 transition-all hover:bg-swiss-orange/5 group/item">
                <span class="w-8 h-8 bg-swiss-orange/20 text-swiss-orange rounded-full flex items-center justify-center font-bold text-sm shadow-[0_0_10px_rgba(255,79,0,0.2)]">✓</span>
                <span class="text-base sm:text-lg text-gray-200 group-hover/item:text-white transition-colors">Eigene Automatisierungen bauen</span>
              </div>
              <div class="flex items-center gap-4 p-4 bg-black/40 border border-white/5 rounded-xl hover:border-swiss-orange/30 transition-all hover:bg-swiss-orange/5 group/item">
                <span class="w-8 h-8 bg-swiss-orange/20 text-swiss-orange rounded-full flex items-center justify-center font-bold text-sm shadow-[0_0_10px_rgba(255,79,0,0.2)]">✓</span>
                <span class="text-base sm:text-lg text-gray-200 group-hover/item:text-white transition-colors">Täglicher Chat-Support</span>
              </div>
              <div class="flex items-center gap-4 p-4 bg-black/40 border border-white/5 rounded-xl hover:border-swiss-orange/30 transition-all hover:bg-swiss-orange/5 group/item">
                <span class="w-8 h-8 bg-swiss-orange/20 text-swiss-orange rounded-full flex items-center justify-center font-bold text-sm shadow-[0_0_10px_rgba(255,79,0,0.2)]">✓</span>
                <span class="text-base sm:text-lg text-gray-200 group-hover/item:text-white transition-colors">Alle Aufzeichnungen dauerhaft</span>
              </div>
            </div>
  
            <!-- Price -->
            <div class="text-center pt-8 border-t border-white/10">
              <p class="text-gray-400 text-sm mb-2 uppercase tracking-widest font-mono">Einmalige Investition</p>
              <p class="text-4xl sm:text-5xl font-black text-white mb-2 drop-shadow-[0_0_15px_rgba(255,255,255,0.3)]">3.779 €</p>
              <p class="text-gray-500 text-xs mt-2">zzgl. MwSt. · Ratenzahlung möglich</p>
            </div>
          </div>

        </div>

        <!-- CTA -->
        <div class="text-center">
          <button
            id="open-modal-offer"
            class="w-full sm:w-auto bg-swiss-orange text-white font-bold py-4 px-8 sm:px-12 text-base sm:text-lg transition-all duration-300 hover:shadow-[0_0_60px_rgba(255,79,0,0.4)]"
          >
            <span class="block">Jetzt bewerben!</span>
            <span class="block text-xs font-normal opacity-80 mt-1">15 Min. Kennenlernen · Unverbindlich</span>
          </button>
          <p class="text-gray-500 text-xs mt-4">Wir prüfen gemeinsam, ob das Programm zu dir passt.</p>
        </div>

      </div>
    </section>


    <!-- ============================================
         FINAL CTA SECTION
         ============================================ -->
    <section class="relative py-16 sm:py-20 bg-[#050507] overflow-hidden">

      <!-- Background Glow -->
      <div class="absolute inset-0 overflow-hidden">
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-swiss-orange/5 rounded-full blur-[100px]"></div>
      </div>

      <div class="container mx-auto px-5 sm:px-6 max-w-2xl relative z-10 text-center">

        <h2 class="text-2xl sm:text-3xl font-black mb-4 text-white">
          Bereit für den nächsten Schritt?
        </h2>
        <p class="text-gray-400 text-sm sm:text-base mb-8">
          In 15 Minuten findest du heraus, ob das Programm zu dir passt. Ohne Verpflichtung.
        </p>

        <button
          id="open-modal-final"
          class="w-full sm:w-auto bg-swiss-orange text-white font-bold py-4 px-8 sm:px-12 text-base sm:text-lg transition-all duration-300 hover:shadow-[0_0_60px_rgba(255,79,0,0.4)]"
        >
          <span class="block">Kostenlos Gespräch buchen</span>
          <span class="block text-xs font-normal opacity-80 mt-1">2–3 Minuten · Kein Risiko</span>
        </button>

      </div>
    </section>


    <!-- ============================================
         FOOTER
         ============================================ -->
    <footer class="bg-[#0a0a0a] border-t border-white/10 py-8">
      <div class="container mx-auto px-5 sm:px-6 max-w-5xl">
        <div class="flex flex-col sm:flex-row justify-between items-center gap-4">
          <a href="/" class="text-lg font-black tracking-tight text-white">
            SYN<span class="text-swiss-orange">CLARO</span>
          </a>
          <div class="flex gap-6 text-sm text-gray-400">
            <a href="/impressum" class="hover:text-white transition-colors">Impressum</a>
            <a href="/datenschutz" class="hover:text-white transition-colors">Datenschutz</a>
            <a href="/agb" class="hover:text-white transition-colors">AGB</a>
          </div>
          <p class="text-xs text-gray-600">© 2026 Synclaro</p>
        </div>
      </div>
    </footer>


    <!-- ============================================
         STICKY MOBILE CTA (Optional)
         ============================================ -->
    <div class="sm:hidden fixed bottom-0 left-0 right-0 z-50 p-3 bg-[#0a0a0a]/90 backdrop-blur-md border-t border-white/10">
      <button
        id="open-modal-sticky"
        class="w-full bg-swiss-orange text-white font-bold py-3 text-sm rounded-lg shadow-[0_0_20px_rgba(255,79,0,0.3)]"
      >
        Jetzt bewerben!
      </button>
    </div>


    <!-- ============================================
         APPLICATION MODAL
         ============================================ -->
    <div id="application-modal" class="fixed inset-0 z-50 hidden">
      <!-- Backdrop -->
      <div id="modal-backdrop" class="absolute inset-0 bg-black/80 backdrop-blur-md"></div>

      <!-- Modal Content -->
      <div class="absolute inset-0 overflow-y-auto">
        <div class="min-h-full flex items-center justify-center p-0 sm:p-4">
          <div id="modal-content" class="relative w-full h-full sm:h-auto sm:max-w-2xl bg-[#0f0f0f] border-0 sm:border border-white/10 shadow-2xl transform scale-95 opacity-0 transition-all duration-300 modal-content-mobile sm:rounded-2xl">

            <!-- Close Button -->
            <button id="close-modal" class="absolute top-4 sm:top-6 right-4 sm:right-6 w-10 h-10 bg-[#1a1a1a] border border-white/10 flex items-center justify-center hover:bg-[#252525] transition-colors z-10 rounded-full text-white">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>

            <!-- Form Content -->
            <div class="p-6 sm:p-8 lg:p-10 modal-form-mobile safe-area-padding flex flex-col h-full sm:h-auto">

              <!-- Trust Header -->
              <div class="mb-6 sm:mb-8 pt-8 sm:pt-0">
                <div class="flex items-center gap-3 mb-4">
                  <span class="inline-flex items-center gap-1.5 px-2.5 py-1 bg-swiss-orange/10 border border-swiss-orange/20 text-swiss-orange font-mono text-[10px] tracking-wider rounded-full">
                    <span class="w-1.5 h-1.5 bg-swiss-orange rounded-full animate-pulse"></span>
                    BEWERBUNG
                  </span>
                  <span class="text-[10px] text-gray-400 flex items-center gap-1">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    60 Sek.
                  </span>
                </div>
                <h3 class="text-2xl sm:text-3xl font-black mb-2 text-white">
                  Deine Bewerbung
                </h3>
                <p class="text-gray-400 text-sm">Keine Zahlung. Wir melden uns innerhalb von 24h.</p>
              </div>

              <!-- SINGLE-PAGE FORM - Kein Multi-Step mehr -->
              <form id="application-form" class="flex-1 flex flex-col">

                <!-- Situation Question (Checkboxes - Mehrfachauswahl) -->
                <div class="mb-6">
                  <p class="text-white font-semibold mb-4 text-sm sm:text-base">
                    In welcher Situation befindest du dich? <span class="text-gray-500 font-normal">(Mehrfachauswahl möglich)</span>
                  </p>
                  <div class="space-y-2.5">
                    <label class="situation-option group relative flex items-start gap-3 p-4 bg-[#1a1a1a] border border-white/5 hover:border-swiss-orange/40 hover:bg-swiss-orange/5 cursor-pointer transition-all rounded-xl">
                      <input type="checkbox" name="q_situation" value="nutze_chatgpt" class="sr-only peer" />
                      <div class="w-5 h-5 rounded border-2 border-gray-600 peer-checked:border-swiss-orange peer-checked:bg-swiss-orange flex-shrink-0 mt-0.5 flex items-center justify-center transition-all">
                        <svg class="w-3 h-3 text-white scale-0 peer-checked:scale-100 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                      </div>
                      <span class="text-gray-300 text-sm group-hover:text-white transition-colors">Ich benutze bereits gelegentlich oder häufiger ChatGPT und andere Anbieter</span>
                      <div class="absolute inset-0 rounded-xl border-2 border-swiss-orange opacity-0 peer-checked:opacity-100 transition-opacity pointer-events-none"></div>
                    </label>
                    <label class="situation-option group relative flex items-start gap-3 p-4 bg-[#1a1a1a] border border-white/5 hover:border-swiss-orange/40 hover:bg-swiss-orange/5 cursor-pointer transition-all rounded-xl">
                      <input type="checkbox" name="q_situation" value="sehe_potenzial" class="sr-only peer" />
                      <div class="w-5 h-5 rounded border-2 border-gray-600 peer-checked:border-swiss-orange peer-checked:bg-swiss-orange flex-shrink-0 mt-0.5 flex items-center justify-center transition-all">
                        <svg class="w-3 h-3 text-white scale-0 peer-checked:scale-100 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                      </div>
                      <span class="text-gray-300 text-sm group-hover:text-white transition-colors">Ich sehe viel Potenzial in KI, aber weiß nicht, wie ich das Thema genau angehen soll</span>
                      <div class="absolute inset-0 rounded-xl border-2 border-swiss-orange opacity-0 peer-checked:opacity-100 transition-opacity pointer-events-none"></div>
                    </label>
                    <label class="situation-option group relative flex items-start gap-3 p-4 bg-[#1a1a1a] border border-white/5 hover:border-swiss-orange/40 hover:bg-swiss-orange/5 cursor-pointer transition-all rounded-xl">
                      <input type="checkbox" name="q_situation" value="habe_ideen" class="sr-only peer" />
                      <div class="w-5 h-5 rounded border-2 border-gray-600 peer-checked:border-swiss-orange peer-checked:bg-swiss-orange flex-shrink-0 mt-0.5 flex items-center justify-center transition-all">
                        <svg class="w-3 h-3 text-white scale-0 peer-checked:scale-100 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                      </div>
                      <span class="text-gray-300 text-sm group-hover:text-white transition-colors">Ich habe schon erste Ideen, was ich in meinem Leben automatisiert oder durch KI gestützt erschaffen könnte</span>
                      <div class="absolute inset-0 rounded-xl border-2 border-swiss-orange opacity-0 peer-checked:opacity-100 transition-opacity pointer-events-none"></div>
                    </label>
                  </div>
                </div>

                <!-- Contact Fields -->
                <div class="space-y-4 mb-6">
                  <div class="grid grid-cols-2 gap-3">
                    <div>
                      <label class="block text-xs font-medium text-gray-400 mb-2">Vorname</label>
                      <input type="text" name="firstName" required class="w-full px-4 py-3.5 bg-[#1a1a1a] border border-white/10 text-white placeholder-gray-600 focus:border-swiss-orange focus:outline-none transition-all text-base rounded-xl" placeholder="Max" />
                    </div>
                    <div>
                      <label class="block text-xs font-medium text-gray-400 mb-2">Nachname</label>
                      <input type="text" name="lastName" required class="w-full px-4 py-3.5 bg-[#1a1a1a] border border-white/10 text-white placeholder-gray-600 focus:border-swiss-orange focus:outline-none transition-all text-base rounded-xl" placeholder="Mustermann" />
                    </div>
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-gray-400 mb-2">E-Mail</label>
                    <input type="email" name="email" required class="w-full px-4 py-3.5 bg-[#1a1a1a] border border-white/10 text-white placeholder-gray-600 focus:border-swiss-orange focus:outline-none transition-all text-base rounded-xl" placeholder="max@beispiel.de" />
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-gray-400 mb-2">Telefon</label>
                    <div class="relative">
                      <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-medium">+49</span>
                      <input type="tel" name="phone" id="phone-input" required class="w-full pl-14 pr-4 py-3.5 bg-[#1a1a1a] border border-white/10 text-white placeholder-gray-600 focus:border-swiss-orange focus:outline-none transition-all text-base rounded-xl" placeholder="123 4567890" inputmode="tel" />
                    </div>
                    <p class="text-gray-500 text-[11px] mt-1.5 pl-1">Nur für Terminabstimmung – kein Spam</p>
                  </div>
                </div>

                <!-- Trust Signals -->
                <div class="mb-6">
                  <div class="flex items-center justify-center gap-2 text-[11px] text-gray-500 bg-green-500/5 border border-green-500/10 rounded-lg py-2.5 px-4">
                    <svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                    </svg>
                    <span>DSGVO-konform geschützt · <a href="/datenschutz" class="text-swiss-orange hover:underline">Datenschutz</a></span>
                  </div>
                </div>

                <!-- Submit Button -->
                <div class="sticky bottom-0 bg-gradient-to-t from-[#0f0f0f] via-[#0f0f0f] to-transparent pt-4 pb-4 mt-auto">
                  <button type="submit" id="submit-btn" class="w-full bg-gradient-to-r from-swiss-orange to-orange-500 text-white font-bold py-4 text-base hover:from-orange-500 hover:to-swiss-orange transition-all disabled:opacity-50 disabled:cursor-not-allowed rounded-xl flex items-center justify-center gap-2 shadow-lg shadow-swiss-orange/25 hover:shadow-swiss-orange/40 hover:scale-[1.02] active:scale-[0.98]">
                    <span id="submit-btn-text">Bewerbung absenden</span>
                    <svg id="submit-btn-arrow" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                    <span id="submit-loading" class="hidden">
                      <svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                      </svg>
                    </span>
                  </button>
                </div>

              </form>

              <!-- Calendar Booking Step -->
              <div id="calendar-booking-step" class="hidden">
                <div class="flex items-center justify-center gap-4 mb-6">
                  <div class="flex items-center gap-2">
                    <div class="w-8 h-8 bg-green-500/20 text-green-500 border border-green-500/30 rounded-full flex items-center justify-center">
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                      </svg>
                    </div>
                    <span class="text-gray-400 text-sm">Bewerbung</span>
                  </div>
                  <div class="w-8 h-px bg-swiss-orange"></div>
                  <div class="flex items-center gap-2">
                    <div class="w-8 h-8 bg-swiss-orange rounded-full flex items-center justify-center shadow-[0_0_10px_rgba(255,79,0,0.5)]">
                      <span class="text-white font-bold text-sm">2</span>
                    </div>
                    <span class="text-white text-sm font-medium">Termin wählen</span>
                  </div>
                </div>
                <div class="text-center mb-6">
                  <h3 class="text-xl sm:text-2xl font-black mb-2 text-white">Fast geschafft!</h3>
                  <p class="text-gray-400 text-sm sm:text-base">Wähle jetzt deinen 15-minütigen Kennenlern-Termin.</p>
                </div>
                <div class="bg-[#1a1a1a] border border-white/10 p-4 mb-6 text-left rounded-xl">
                  <p class="text-xs font-mono text-gray-500 uppercase tracking-wider mb-3">Was erwartet dich?</p>
                  <ul class="space-y-2">
                    <li class="flex items-start gap-2 text-sm text-gray-300">
                      <svg class="w-4 h-4 text-swiss-orange flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                      </svg>
                      <span>15-minütiges Kennenlernen mit Marco Heer</span>
                    </li>
                    <li class="flex items-start gap-2 text-sm text-gray-300">
                      <svg class="w-4 h-4 text-swiss-orange flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                      </svg>
                      <span>Gemeinsame Feststellung, ob du zum Coaching passt</span>
                    </li>
                    <li class="flex items-start gap-2 text-sm text-gray-300">
                      <svg class="w-4 h-4 text-swiss-orange flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                      </svg>
                      <span>Klärung deiner offenen Fragen</span>
                    </li>
                  </ul>
                </div>
                <div id="calendar-loading" class="text-center py-8">
                  <div class="w-8 h-8 border-2 border-swiss-orange border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
                  <p class="text-gray-500">Lade verfügbare Termine...</p>
                </div>
                <div id="calendar-widget" class="hidden">
                  <div class="flex items-center justify-between mb-4">
                    <button id="prev-week" class="p-2 hover:bg-white/5 rounded transition-colors disabled:opacity-30 text-white" disabled>
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                      </svg>
                    </button>
                    <span id="week-label" class="text-white font-medium"></span>
                    <button id="next-week" class="p-2 hover:bg-white/5 rounded transition-colors text-white">
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                      </svg>
                    </button>
                  </div>
                  <div id="days-container" class="grid grid-cols-5 gap-2 mb-4"></div>
                  <div id="slots-container" class="max-h-48 overflow-y-auto space-y-2 pr-2 custom-scrollbar">
                    <p id="select-day-hint" class="text-gray-500 text-center text-sm py-4">Wähle einen Tag, um verfügbare Zeiten zu sehen</p>
                  </div>
                  <div id="selected-slot-display" class="hidden mt-4 p-4 bg-swiss-orange/10 border border-swiss-orange/30 rounded-xl">
                    <div class="flex items-center justify-between">
                      <div>
                        <p class="text-white font-bold" id="selected-slot-text"></p>
                        <p class="text-swiss-orange text-sm">15 Minuten Kennenlerngespräch</p>
                      </div>
                      <button id="confirm-booking" class="px-4 py-2 bg-swiss-orange text-white font-bold hover:bg-orange-600 transition-colors rounded-lg shadow-lg shadow-swiss-orange/20">Termin buchen</button>
                    </div>
                  </div>
                  <div id="booking-loading" class="hidden mt-4 text-center py-4">
                    <div class="w-6 h-6 border-2 border-swiss-orange border-t-transparent rounded-full animate-spin mx-auto mb-2"></div>
                    <p class="text-gray-500 text-sm">Termin wird gebucht...</p>
                  </div>
                </div>
                <div id="calendar-error" class="hidden text-center py-8">
                  <div class="w-12 h-12 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-6 h-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                  </div>
                  <p class="text-gray-500 mb-4" id="calendar-error-text">Termine konnten nicht geladen werden.</p>
                  <button id="retry-calendar" class="text-swiss-orange font-medium hover:underline">Erneut versuchen</button>
                </div>
              </div>

              <!-- Booking Confirmed -->
              <div id="booking-confirmed" class="hidden text-center py-8 sm:py-12">
                <div class="w-16 h-16 sm:w-20 sm:h-20 bg-green-500/10 border border-green-500/30 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6 shadow-[0_0_30px_rgba(34,197,94,0.2)]">
                  <svg class="w-8 h-8 sm:w-10 sm:h-10 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                </div>
                <h3 class="text-xl sm:text-2xl font-black mb-3 sm:mb-4 text-white">Termin gebucht!</h3>
                <p class="text-swiss-orange font-medium mb-2" id="confirmed-datetime"></p>
                <p class="text-gray-400 mb-4 sm:mb-6 text-sm sm:text-base px-4">Du erhältst in Kürze eine Bestätigung per E-Mail mit allen Details.</p>
                <button id="close-success" class="text-white hover:text-swiss-orange font-medium hover:underline text-sm sm:text-base transition-colors">Fenster schließen</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <!-- Tracking -->
    <LPUserBehaviorTracker pagePath="/lp/coaching" client:load />
    <MetaPixelTracker pagePath="/lp/coaching" client:load />


    <!-- ============================================
         SCRIPTS
         ============================================ -->
    <script>
      // ============================================
      // FORM A/B TEST - Feature Flag
      // ============================================
      function getFormVariant(): 'v1' | 'v2_short' {
        const STORAGE_KEY = 'form_variant';
        let variant = localStorage.getItem(STORAGE_KEY) as 'v1' | 'v2_short' | null;

        if (!variant) {
          // 50/50 split based on random, persist for stable experience
          variant = Math.random() < 0.5 ? 'v1' : 'v2_short';
          localStorage.setItem(STORAGE_KEY, variant);
        }

        return variant;
      }

      const FORM_VARIANT = getFormVariant();
      console.log('[A/B Test] Form variant:', FORM_VARIANT);

      // Apply variant-specific UI changes on load
      document.addEventListener('DOMContentLoaded', () => {
        if (FORM_VARIANT === 'v2_short') {
          // Hide v1-only elements, show v2-only elements
          document.querySelectorAll('[data-form-v1-only]').forEach(el => (el as HTMLElement).style.display = 'none');
          document.querySelectorAll('[data-form-v2-only]').forEach(el => (el as HTMLElement).style.display = '');

          // Update progress bar for 2 steps
          const stepIndicator3 = document.getElementById('step-indicator-3');
          const stepLine2 = document.getElementById('step-line-2');
          if (stepIndicator3) stepIndicator3.style.display = 'none';
          if (stepLine2) stepLine2.style.display = 'none';
        } else {
          // Hide v2-only elements
          document.querySelectorAll('[data-form-v2-only]').forEach(el => (el as HTMLElement).style.display = 'none');
        }
      });

      // Modal functionality
      const modal = document.getElementById('application-modal');
      const modalContent = document.getElementById('modal-content');
      const modalBackdrop = document.getElementById('modal-backdrop');
      const closeModal = document.getElementById('close-modal');
      const closeSuccess = document.getElementById('close-success');

      // All buttons that open the modal
      const openButtons = [
        'open-modal-hero',
        'open-modal-hero-mobile',
        'open-modal-transformation',
        'open-modal-offer',
        'open-modal-final',
        'open-modal-sticky'
      ].map(id => document.getElementById(id)).filter(Boolean);

      // Sticky CTA visibility
      const stickyCTA = document.querySelector('.fixed.bottom-0');

      function updateStickyCTA() {
        const scrollY = window.scrollY;
        const heroHeight = window.innerHeight * 0.8;
        const isModalOpen = !modal?.classList.contains('hidden');

        if (scrollY > heroHeight && !isModalOpen && stickyCTA) {
          (stickyCTA as HTMLElement).style.transform = 'translateY(0)';
        } else if (stickyCTA) {
          (stickyCTA as HTMLElement).style.transform = 'translateY(100%)';
        }
      }

      // Initial state
      if (stickyCTA) {
        (stickyCTA as HTMLElement).style.transform = 'translateY(100%)';
        (stickyCTA as HTMLElement).style.transition = 'transform 0.3s ease-out';
      }

      window.addEventListener('scroll', updateStickyCTA, { passive: true });
      updateStickyCTA();

      // ============================================
      // FORENSIC TRACKING SYSTEM
      // ============================================
      const forensicTracking = {
        ctaClickTime: 0,
        modalRenderedTime: 0,
        firstInteractionTracked: false,
        modalTimeoutId: null as ReturnType<typeof setTimeout> | null,

        getSessionId() {
          return sessionStorage.getItem('meta_session_id') || '';
        },

        async sendAction(action: string, extraData: Record<string, any> = {}) {
          try {
            await fetch('/api/lp-session', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                action,
                session_id: this.getSessionId(),
                form_variant: FORM_VARIANT,
                ...extraData,
              }),
            });
          } catch (e) {
            console.error(`[Forensic] Failed to send ${action}:`, e);
          }
        },

        onCtaClick() {
          this.ctaClickTime = Date.now();
          this.firstInteractionTracked = false;
          this.modalTimeoutId = setTimeout(() => {
            if (!this.modalRenderedTime) {
              this.sendAction('modal_timeout');
            }
          }, 2000);
          this.sendAction('cta_click', { viewport_height: window.innerHeight });
        },

        onModalRendered() {
          this.modalRenderedTime = Date.now();
          const renderTime = this.ctaClickTime ? this.modalRenderedTime - this.ctaClickTime : 0;
          if (this.modalTimeoutId) {
            clearTimeout(this.modalTimeoutId);
            this.modalTimeoutId = null;
          }
          this.sendAction('modal_rendered', { modal_render_time_ms: renderTime });
          window.dispatchEvent(new CustomEvent('form_modal_open'));
        },

        onFirstInteraction(interactionType: string) {
          if (this.firstInteractionTracked) return;
          this.firstInteractionTracked = true;
          this.sendAction('first_interaction', { interaction_type: interactionType });
        },

        reset() {
          this.ctaClickTime = 0;
          this.modalRenderedTime = 0;
          this.firstInteractionTracked = false;
          if (this.modalTimeoutId) {
            clearTimeout(this.modalTimeoutId);
            this.modalTimeoutId = null;
          }
        },
      };

      function showModal() {
        forensicTracking.onCtaClick();
        modal?.classList.remove('hidden');
        if (stickyCTA) (stickyCTA as HTMLElement).style.transform = 'translateY(100%)';
        document.body.style.overflow = 'hidden';

        setTimeout(() => {
          modalContent?.classList.remove('scale-95', 'opacity-0');
          modalContent?.classList.add('scale-100', 'opacity-100');
          requestAnimationFrame(() => {
            requestAnimationFrame(() => {
              forensicTracking.onModalRendered();
              formTracking.onFormOpen();
            });
          });
        }, 10);
      }

      function hideModal() {
        modalContent?.classList.remove('scale-100', 'opacity-100');
        modalContent?.classList.add('scale-95', 'opacity-0');
        setTimeout(() => {
          modal?.classList.add('hidden');
          document.body.style.overflow = '';
        }, 300);
        forensicTracking.reset();
      }

      openButtons.forEach(btn => btn?.addEventListener('click', showModal));
      closeModal?.addEventListener('click', hideModal);
      closeSuccess?.addEventListener('click', hideModal);
      modalBackdrop?.addEventListener('click', hideModal);

      modalContent?.addEventListener('touchstart', () => {
        forensicTracking.onFirstInteraction('tap');
      }, { passive: true });
      modalContent?.addEventListener('mousedown', () => {
        forensicTracking.onFirstInteraction('tap');
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && !modal?.classList.contains('hidden')) {
          hideModal();
        }
      });

      // ============================================
      // MULTI-STEP FORM WIZARD
      // ============================================
      let currentStep = 1;
      // V2 Short: Only 1 step (goal + contact combined), then calendar
      const totalSteps = FORM_VARIANT === 'v2_short' ? 1 : 3;
      const stepLabels = FORM_VARIANT === 'v2_short' ? ['Bewerbung'] : ['Dein Ziel', 'Kontaktdaten', 'Details'];
      const stepNames = FORM_VARIANT === 'v2_short' ? ['application'] : ['goal', 'contact', 'details'];

      const form = document.getElementById('application-form') as HTMLFormElement;
      const nextStepBtn = document.getElementById('next-step-btn');
      const prevStepBtn = document.getElementById('prev-step-btn');
      const nextBtnText = document.getElementById('next-btn-text');
      const nextBtnArrow = document.getElementById('next-btn-arrow');
      const submitLoading = document.getElementById('submit-loading');
      const currentStepNum = document.getElementById('current-step-num');
      const stepLabel = document.getElementById('step-label');
      const phoneInput = document.getElementById('phone-input') as HTMLInputElement;
      const phoneError = document.getElementById('phone-error');

      const formSteps = [
        document.getElementById('form-step-1'),
        document.getElementById('form-step-2'),
        document.getElementById('form-step-3')
      ];

      // ============================================
      // GRANULAR FORM TRACKING
      // ============================================
      const formTracking = {
        formOpenTime: 0,
        stepEnterTime: 0,
        stepTimes: { 1: 0, 2: 0, 3: 0 } as Record<number, number>,
        filledFields: [] as string[],
        maxStepReached: 0,
        stepsCompleted: { 1: false, 2: false, 3: false } as Record<number, boolean>,
        isFormOpen: false,

        getSessionInfo() {
          return {
            session_id: sessionStorage.getItem('meta_session_id') || '',
            visitor_id: localStorage.getItem('meta_visitor_id') || '',
            device_type: window.innerWidth < 768 ? 'mobile' : window.innerWidth < 1024 ? 'tablet' : 'desktop',
          };
        },

        async sendEvent(eventData: Record<string, any>) {
          try {
            const sessionInfo = this.getSessionInfo();
            await fetch('/api/lp-form-event', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                ...sessionInfo,
                ...eventData,
                form_variant: FORM_VARIANT,
                time_since_form_open_ms: this.formOpenTime > 0 ? Date.now() - this.formOpenTime : 0,
              })
            });
          } catch (e) {
            console.error('[FormTracking] Error:', e);
          }
        },

        onFormOpen() {
          this.formOpenTime = Date.now();
          this.stepEnterTime = Date.now();
          this.isFormOpen = true;
          this.maxStepReached = 1;
          this.sendEvent({ event_type: 'step_enter', step_number: 1, step_name: stepNames[0], time_on_current_step_ms: 0 });
        },

        onStepEnter(step: number) {
          if (this.stepEnterTime > 0 && currentStep !== step) {
            const timeOnPrevStep = Date.now() - this.stepEnterTime;
            this.stepTimes[currentStep] = (this.stepTimes[currentStep] || 0) + timeOnPrevStep;
            this.sendEvent({ event_type: 'step_exit', step_number: currentStep, step_name: stepNames[currentStep - 1], time_on_current_step_ms: timeOnPrevStep });
          }
          this.stepEnterTime = Date.now();
          if (step > this.maxStepReached) this.maxStepReached = step;
          this.sendEvent({ event_type: 'step_enter', step_number: step, step_name: stepNames[step - 1], time_on_current_step_ms: 0 });
        },

        onStepComplete(step: number) {
          const timeOnStep = Date.now() - this.stepEnterTime;
          this.stepTimes[step] = (this.stepTimes[step] || 0) + timeOnStep;
          this.stepsCompleted[step] = true;
          this.sendEvent({
            event_type: 'step_complete',
            step_number: step,
            step_name: stepNames[step - 1],
            time_on_current_step_ms: timeOnStep,
            update_session_summary: true,
            form_max_step_reached: this.maxStepReached,
            form_step_1_completed: this.stepsCompleted[1],
            form_step_2_completed: this.stepsCompleted[2],
            form_step_3_completed: this.stepsCompleted[3],
            form_total_time_ms: Date.now() - this.formOpenTime,
            form_fields_filled: this.filledFields,
          });
        },

        onFieldFocus(fieldName: string, fieldType: string) {
          this.sendEvent({
            event_type: 'field_focus',
            step_number: currentStep,
            step_name: stepNames[currentStep - 1],
            field_name: fieldName,
            field_type: fieldType,
            time_on_current_step_ms: Date.now() - this.stepEnterTime,
          });
        },

        onFieldBlur(fieldName: string, fieldType: string, value: string) {
          const isFilled = value && value.trim().length > 0;
          if (isFilled && !this.filledFields.includes(fieldName)) {
            this.filledFields.push(fieldName);
          }
          this.sendEvent({
            event_type: 'field_blur',
            step_number: currentStep,
            step_name: stepNames[currentStep - 1],
            field_name: fieldName,
            field_type: fieldType,
            field_filled: isFilled,
            time_on_current_step_ms: Date.now() - this.stepEnterTime,
          });
        },

        onFieldChange(fieldName: string, fieldType: string, value: string) {
          if (!this.filledFields.includes(fieldName)) {
            this.filledFields.push(fieldName);
          }
          this.sendEvent({
            event_type: 'field_change',
            step_number: currentStep,
            step_name: stepNames[currentStep - 1],
            field_name: fieldName,
            field_type: fieldType,
            field_filled: true,
            time_on_current_step_ms: Date.now() - this.stepEnterTime,
          });
        },

        onFormAbandon() {
          if (!this.isFormOpen) return;
          const timeOnCurrentStep = Date.now() - this.stepEnterTime;
          this.stepTimes[currentStep] = (this.stepTimes[currentStep] || 0) + timeOnCurrentStep;
          this.sendEvent({
            event_type: 'form_abandon',
            step_number: currentStep,
            step_name: stepNames[currentStep - 1],
            time_on_current_step_ms: timeOnCurrentStep,
            update_session_summary: true,
            form_max_step_reached: this.maxStepReached,
            form_abandonment_step: currentStep,
            form_total_time_ms: Date.now() - this.formOpenTime,
            form_fields_filled: this.filledFields,
          });
          this.reset();
        },

        onFormSubmit() {
          const timeOnCurrentStep = Date.now() - this.stepEnterTime;
          this.stepTimes[currentStep] = (this.stepTimes[currentStep] || 0) + timeOnCurrentStep;
          this.stepsCompleted[3] = true;
          this.sendEvent({
            event_type: 'form_submit',
            step_number: 3,
            step_name: stepNames[2],
            time_on_current_step_ms: timeOnCurrentStep,
            update_session_summary: true,
            form_max_step_reached: 3,
            form_step_1_completed: true,
            form_step_2_completed: true,
            form_step_3_completed: true,
            form_total_time_ms: Date.now() - this.formOpenTime,
            form_fields_filled: this.filledFields,
          });
          this.reset();
        },

        reset() {
          this.formOpenTime = 0;
          this.stepEnterTime = 0;
          this.stepTimes = { 1: 0, 2: 0, 3: 0 };
          this.filledFields = [];
          this.maxStepReached = 0;
          this.stepsCompleted = { 1: false, 2: false, 3: false };
          this.isFormOpen = false;
        }
      };

      // Attach field listeners
      function attachFieldListeners() {
        // Radio inputs
        const radioInputs = form.querySelectorAll('input[type="radio"]');
        radioInputs.forEach((input) => {
          const el = input as HTMLInputElement;
          el.addEventListener('change', () => {
            if (el.checked) {
              forensicTracking.onFirstInteraction('selection');
              formTracking.onFieldChange(el.name, 'radio', el.value);
            }
          });
        });

        // Text/Email/Tel inputs - Focus & Blur tracking
        const textInputs = form.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"]');
        textInputs.forEach((input) => {
          const el = input as HTMLInputElement;
          const fieldName = el.name || el.id || 'unknown';
          const fieldType = el.type || 'text';

          el.addEventListener('focus', () => {
            forensicTracking.onFirstInteraction('field_focus');
            formTracking.onFieldFocus(fieldName, fieldType);
          });

          el.addEventListener('blur', () => {
            formTracking.onFieldBlur(fieldName, fieldType, el.value);
          });
        });
      }
      attachFieldListeners();

      function validateStep(step: number): boolean {
        // V2 Short: Single step with goal + email required
        if (FORM_VARIANT === 'v2_short' && step === 1) {
          const goal = form.querySelector('input[name="q_goal"]:checked');
          const email = (form.querySelector('input[name="email_v2"]') as HTMLInputElement)?.value?.trim();
          const phone = (form.querySelector('input[name="phone_v2"]') as HTMLInputElement)?.value?.trim();

          // Email validation (tolerant)
          const emailValid = email && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

          // Phone validation only if filled
          if (phone) {
            const phoneDigits = phone.replace(/\D/g, '');
            if (phoneDigits.length < 6) {
              formTracking.sendEvent({
                event_type: 'field_validation_error',
                step_number: 1,
                validation_error_field: 'phone_v2',
                validation_error_type: 'format',
                validation_error_message: 'Phone too short'
              });
              return false;
            }
          }

          if (!goal) {
            formTracking.sendEvent({
              event_type: 'field_validation_error',
              step_number: 1,
              validation_error_field: 'q_goal',
              validation_error_type: 'required',
              validation_error_message: 'Goal not selected'
            });
          }
          if (!emailValid) {
            formTracking.sendEvent({
              event_type: 'field_validation_error',
              step_number: 1,
              validation_error_field: 'email_v2',
              validation_error_type: email ? 'format' : 'required',
              validation_error_message: email ? 'Invalid email format' : 'Email required'
            });
          }

          return !!(goal && emailValid);
        }

        // V1: Original step validation
        if (step === 1) {
          const goal = form.querySelector('input[name="q_goal"]:checked');
          const time = form.querySelector('input[name="q_time_commitment"]:checked');
          return !!(goal && time);
        } else if (step === 2) {
          const firstName = (form.querySelector('input[name="firstName"]') as HTMLInputElement)?.value?.trim();
          const lastName = (form.querySelector('input[name="lastName"]') as HTMLInputElement)?.value?.trim();
          const email = (form.querySelector('input[name="email"]') as HTMLInputElement)?.value?.trim();
          const phone = phoneInput?.value?.trim();
          const emailValid = email && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
          const phoneDigits = phone?.replace(/\D/g, '') || '';
          const phoneValid = phoneDigits.length >= 6;
          if (!phoneValid && phone) phoneError?.classList.remove('hidden');
          else phoneError?.classList.add('hidden');
          return !!(firstName && lastName && emailValid && phoneValid);
        }
        return true;
      }

      function updateStepUI() {
        if (currentStepNum) currentStepNum.textContent = String(currentStep);
        if (stepLabel) stepLabel.textContent = stepLabels[currentStep - 1];
        const stepLabelMobile = document.getElementById('step-label-mobile');
        if (stepLabelMobile) stepLabelMobile.textContent = stepLabels[currentStep - 1];

        for (let i = 1; i <= totalSteps; i++) {
          const indicator = document.getElementById(`step-indicator-${i}`);
          if (indicator) {
            if (i < currentStep) {
              indicator.className = 'w-8 h-8 rounded-full bg-green-500 flex items-center justify-center text-sm font-bold text-[#050507] shadow-lg shadow-green-500/30';
              indicator.innerHTML = '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg>';
            } else if (i === currentStep) {
              indicator.className = 'w-8 h-8 rounded-full bg-swiss-orange flex items-center justify-center text-sm font-bold text-white shadow-lg shadow-swiss-orange/30 ring-2 ring-swiss-orange/20';
              indicator.innerHTML = String(i);
            } else {
              indicator.className = 'w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-sm font-medium text-gray-500 border border-white/10';
              indicator.innerHTML = String(i);
            }
          }
          if (i < totalSteps) {
            const line = document.getElementById(`step-line-${i}`);
            if (line) line.className = i < currentStep ? 'w-8 sm:w-12 h-0.5 bg-green-500 transition-colors shadow-[0_0_10px_rgba(34,197,94,0.5)]' : 'w-8 sm:w-12 h-0.5 bg-white/10 transition-colors';
          }
        }

        formSteps.forEach((stepEl, index) => {
          if (stepEl) stepEl.classList.toggle('hidden', index + 1 !== currentStep);
        });

        if (prevStepBtn) prevStepBtn.classList.toggle('hidden', currentStep === 1);

        if (nextBtnText && nextBtnArrow) {
          if (currentStep === totalSteps) {
            nextBtnText.textContent = 'Bewerbung absenden';
            nextBtnArrow.classList.add('hidden');
          } else {
            nextBtnText.textContent = 'Weiter';
            nextBtnArrow.classList.remove('hidden');
          }
        }
      }

      function goToNextStep() {
        if (!validateStep(currentStep)) {
          nextStepBtn?.classList.add('animate-shake');
          setTimeout(() => nextStepBtn?.classList.remove('animate-shake'), 500);
          return;
        }
        formTracking.onStepComplete(currentStep);
        if (currentStep < totalSteps) {
          const nextStep = currentStep + 1;
          formTracking.onStepEnter(nextStep);
          currentStep = nextStep;
          updateStepUI();
        } else {
          submitForm();
        }
      }

      function goToPrevStep() {
        if (currentStep > 1) {
          formTracking.onStepEnter(currentStep - 1);
          currentStep--;
          updateStepUI();
        }
      }

      if (phoneInput) {
        phoneInput.addEventListener('input', (e) => {
          let value = (e.target as HTMLInputElement).value;
          // Tolerant: allow digits, spaces, dashes, slashes
          value = value.replace(/[^\d\s\-\/]/g, '');
          if (value.replace(/[\s\-\/]/g, '').length > 15) value = value.slice(0, -1);
          (e.target as HTMLInputElement).value = value;
          phoneError?.classList.add('hidden');
        });
      }

      nextStepBtn?.addEventListener('click', goToNextStep);
      prevStepBtn?.addEventListener('click', goToPrevStep);

      function resetFormAndTrack() {
        if (currentStep > 0 && !form.classList.contains('hidden')) {
          formTracking.onFormAbandon();
        }
        currentStep = 1;
        updateStepUI();
        form.reset();
        form.classList.remove('hidden');
      }

      closeModal?.addEventListener('click', resetFormAndTrack);
      modalBackdrop?.addEventListener('click', resetFormAndTrack);

      updateStepUI();

      // ============================================
      // CALENDAR BOOKING
      // ============================================
      let currentApplicationId: string | null = null;
      let availableSlots: Record<string, Array<{date: string, time: string, datetime: string}>> = {};
      let selectedSlot: {date: string, time: string, datetime: string} | null = null;
      let currentWeekOffset = 0;

      const calendarBookingStep = document.getElementById('calendar-booking-step');
      const calendarLoading = document.getElementById('calendar-loading');
      const calendarWidget = document.getElementById('calendar-widget');
      const calendarError = document.getElementById('calendar-error');
      const calendarErrorText = document.getElementById('calendar-error-text');
      const retryCalendar = document.getElementById('retry-calendar');
      const daysContainer = document.getElementById('days-container');
      const slotsContainer = document.getElementById('slots-container');
      const selectDayHint = document.getElementById('select-day-hint');
      const selectedSlotDisplay = document.getElementById('selected-slot-display');
      const selectedSlotText = document.getElementById('selected-slot-text');
      const confirmBooking = document.getElementById('confirm-booking');
      const bookingLoading = document.getElementById('booking-loading');
      const bookingConfirmed = document.getElementById('booking-confirmed');
      const confirmedDatetime = document.getElementById('confirmed-datetime');
      const weekLabel = document.getElementById('week-label');
      const prevWeekBtn = document.getElementById('prev-week');
      const nextWeekBtn = document.getElementById('next-week');

      const dayNames = ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'];
      const monthNames = ['Jan', 'Feb', 'Mär', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'];

      async function loadAvailableSlots() {
        calendarLoading?.classList.remove('hidden');
        calendarWidget?.classList.add('hidden');
        calendarError?.classList.add('hidden');
        try {
          const response = await fetch('/api/available-slots?days=14');
          if (!response.ok) throw new Error('Failed to load slots');
          const data = await response.json();
          availableSlots = data.slotsByDate || {};
          calendarLoading?.classList.add('hidden');
          calendarWidget?.classList.remove('hidden');
          renderCalendar();
        } catch (error) {
          calendarLoading?.classList.add('hidden');
          calendarError?.classList.remove('hidden');
          if (calendarErrorText) calendarErrorText.textContent = 'Termine konnten nicht geladen werden.';
        }
      }

      function renderCalendar() {
        if (!daysContainer) return;
        const today = new Date();
        const startDate = new Date(today);
        startDate.setDate(startDate.getDate() + (currentWeekOffset * 7));
        while (startDate.getDay() !== 1) startDate.setDate(startDate.getDate() + 1);

        const endDate = new Date(startDate);
        endDate.setDate(endDate.getDate() + 4);
        if (weekLabel) weekLabel.textContent = `${startDate.getDate()}. ${monthNames[startDate.getMonth()]} - ${endDate.getDate()}. ${monthNames[endDate.getMonth()]}`;
        if (prevWeekBtn) (prevWeekBtn as HTMLButtonElement).disabled = currentWeekOffset === 0;

        daysContainer.innerHTML = '';
        for (let i = 0; i < 5; i++) {
          const date = new Date(startDate);
          date.setDate(date.getDate() + i);
          const dateStr = date.toISOString().split('T')[0];
          const slotsForDay = availableSlots[dateStr] || [];
          const hasSlots = slotsForDay.length > 0;

          const dayBtn = document.createElement('button');
          dayBtn.type = 'button';
          dayBtn.className = `p-3 border rounded-xl text-center transition-all ${hasSlots ? 'border-white/10 bg-[#1a1a1a] hover:border-swiss-orange hover:bg-swiss-orange/10 cursor-pointer text-white shadow-sm' : 'border-transparent bg-white/5 text-gray-600 opacity-40 cursor-not-allowed'}`;
          dayBtn.disabled = !hasSlots;
          dayBtn.dataset.date = dateStr;
          dayBtn.innerHTML = `<div class="text-xs text-gray-500">${dayNames[date.getDay()]}</div><div class="text-lg font-bold text-white">${date.getDate()}</div><div class="text-xs ${hasSlots ? 'text-swiss-orange' : 'text-gray-600'}">${hasSlots ? slotsForDay.length + ' frei' : '-'}</div>`;
          if (hasSlots) dayBtn.addEventListener('click', () => selectDay(dateStr, dayBtn));
          daysContainer.appendChild(dayBtn);
        }
      }

      function selectDay(dateStr: string, btnElement: HTMLElement) {
        daysContainer?.querySelectorAll('button').forEach(btn => btn.classList.remove('border-swiss-orange', 'bg-swiss-orange/10'));
        btnElement.classList.add('border-swiss-orange', 'bg-swiss-orange/10');
        selectDayHint?.classList.add('hidden');
        const slots = availableSlots[dateStr] || [];
        if (!slotsContainer) return;
        slotsContainer.innerHTML = '';
        slots.forEach(slot => {
          const slotBtn = document.createElement('button');
          slotBtn.type = 'button';
          slotBtn.className = 'w-full p-3 bg-white border border-gray-200 hover:border-swiss-orange text-gray-900 text-center transition-colors';
          slotBtn.textContent = slot.time + ' Uhr';
          slotBtn.addEventListener('click', () => selectTimeSlot(slot));
          slotsContainer.appendChild(slotBtn);
        });
      }

      function selectTimeSlot(slot: {date: string, time: string, datetime: string}) {
        selectedSlot = slot;
        const date = new Date(slot.datetime);
        const dayName = ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'][date.getDay()];
        const displayText = `${dayName}, ${date.getDate()}. ${monthNames[date.getMonth()]} um ${slot.time} Uhr`;
        if (selectedSlotText) selectedSlotText.textContent = displayText;
        selectedSlotDisplay?.classList.remove('hidden');
        slotsContainer?.querySelectorAll('button').forEach(btn => {
          btn.classList.toggle('border-swiss-orange', btn.textContent === slot.time + ' Uhr');
          btn.classList.toggle('bg-swiss-orange/10', btn.textContent === slot.time + ' Uhr');
        });
      }

      async function confirmBookingHandler() {
        if (!selectedSlot || !currentApplicationId) return;
        selectedSlotDisplay?.classList.add('hidden');
        bookingLoading?.classList.remove('hidden');
        try {
          const response = await fetch('/api/book-appointment', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ applicationId: currentApplicationId, datetime: selectedSlot.datetime })
          });
          const result = await response.json();
          if (response.ok && result.success) {
            window.dispatchEvent(new CustomEvent('meta_schedule', { detail: { applicationId: currentApplicationId, appointmentDatetime: result.appointment.datetime } }));
            calendarBookingStep?.classList.add('hidden');
            bookingConfirmed?.classList.remove('hidden');
            if (confirmedDatetime) confirmedDatetime.textContent = result.appointment.formattedDate + ' um ' + result.appointment.formattedTime + ' Uhr';
          } else {
            throw new Error(result.error || 'Booking failed');
          }
        } catch (error: any) {
          bookingLoading?.classList.add('hidden');
          selectedSlotDisplay?.classList.remove('hidden');
          alert(error.message || 'Fehler beim Buchen.');
        }
      }

      prevWeekBtn?.addEventListener('click', () => {
        if (currentWeekOffset > 0) {
          currentWeekOffset--;
          selectedSlot = null;
          selectedSlotDisplay?.classList.add('hidden');
          selectDayHint?.classList.remove('hidden');
          if (slotsContainer) slotsContainer.innerHTML = '';
          renderCalendar();
        }
      });

      nextWeekBtn?.addEventListener('click', () => {
        currentWeekOffset++;
        selectedSlot = null;
        selectedSlotDisplay?.classList.add('hidden');
        selectDayHint?.classList.remove('hidden');
        if (slotsContainer) slotsContainer.innerHTML = '';
        renderCalendar();
      });

      confirmBooking?.addEventListener('click', confirmBookingHandler);
      retryCalendar?.addEventListener('click', loadAvailableSlots);

      async function submitForm() {
        formTracking.onFormSubmit();
        if (nextStepBtn) nextStepBtn.setAttribute('disabled', 'true');
        if (nextBtnText) nextBtnText.classList.add('hidden');
        if (nextBtnArrow) nextBtnArrow.classList.add('hidden');
        submitLoading?.classList.remove('hidden');

        const formData = new FormData(form);
        let data: Record<string, any>;

        if (FORM_VARIANT === 'v2_short') {
          // V2 Short: Minimal fields, nulls for optional data
          let phone = formData.get('phone_v2') as string;
          if (phone && !phone.startsWith('+')) phone = '+49 ' + phone.replace(/^0+/, '');

          data = {
            firstName: formData.get('firstName_v2') || null,
            lastName: null,
            email: formData.get('email_v2'),
            phone: phone || null,
            program: 'gruppen_coaching',
            questionnaireAnswers: {
              goal: formData.get('q_goal'),
              time_commitment: null,
              knowledge_level: null
            },
            motivation: null,
            source: 'lp_coaching_v2_short',
            formVersion: 'v2_short',
            form_variant: FORM_VARIANT
          };
        } else {
          // V1: Original full form
          const questionnaireAnswers = {
            goal: formData.get('q_goal'),
            time_commitment: formData.get('q_time_commitment'),
            knowledge_level: formData.get('q_knowledge_level') || 'anfaenger'
          };

          let phone = formData.get('phone') as string;
          if (phone && !phone.startsWith('+')) phone = '+49 ' + phone.replace(/^0+/, '');

          data = {
            firstName: formData.get('firstName'),
            lastName: formData.get('lastName'),
            email: formData.get('email'),
            phone: phone,
            program: 'gruppen_coaching',
            questionnaireAnswers,
            motivation: formData.get('motivation') || null,
            source: 'lp_coaching_v2',
            formVersion: 'v2_multistep',
            form_variant: FORM_VARIANT
          };
        }

        try {
          const sessionId = sessionStorage.getItem('meta_session_id') || sessionStorage.getItem('lp_session_id');
          const headers: Record<string, string> = { 'Content-Type': 'application/json' };
          if (sessionId) headers['x-session-id'] = sessionId;

          const response = await fetch('/api/lp-application', { method: 'POST', headers, body: JSON.stringify(data) });
          const result = await response.json();

          if (response.ok && result.id) {
            currentApplicationId = result.id;
            window.dispatchEvent(new CustomEvent('meta_lead', { detail: { applicationId: result.id } }));
            form.classList.add('hidden');
            calendarBookingStep?.classList.remove('hidden');
            loadAvailableSlots();
          } else {
            throw new Error(result.error || 'Server error');
          }
        } catch (error) {
          alert('Es ist ein Fehler aufgetreten. Bitte versuche es später erneut.');
          if (nextStepBtn) nextStepBtn.removeAttribute('disabled');
          if (nextBtnText) nextBtnText.classList.remove('hidden');
          submitLoading?.classList.add('hidden');
        }
      }

      form?.addEventListener('submit', (e) => e.preventDefault());
    </script>


    <!-- ============================================
         STYLES
         ============================================ -->
    <style>
      .bg-gradient-radial {
        background: radial-gradient(circle, var(--tw-gradient-from), var(--tw-gradient-to));
      }

      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
        20%, 40%, 60%, 80% { transform: translateX(4px); }
      }

      .animate-shake {
        animation: shake 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
      }

      .scroll-reveal {
        opacity: 0;
        transform: translateY(40px);
        transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1), transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
      }

      .scroll-reveal.revealed {
        opacity: 1;
        transform: translateY(0);
      }

      @media (prefers-reduced-motion: reduce) {
        *, *::before, *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      @media (max-width: 639px) {
        .blur-3xl { filter: blur(40px) !important; }
        .bg-gradient-radial { opacity: 0.15 !important; }
      }
    </style>

  </body>
</html>
