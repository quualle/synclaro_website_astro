[build]
  command = "npm run build"
  publish = "dist"

[build.environment]
  NODE_VERSION = "20"

[functions]
  directory = ".netlify/functions"
  included_files = [".netlify/functions/**"]

# SEO: Trailing Slash Normalisierung (vermeidet Duplikate in GSC)
# Alle URLs mit trailing slash werden auf ohne trailing slash umgeleitet
[[redirects]]
  from = "/*/"
  to = "/:splat"
  status = 301
  force = true

# SEO: www zu non-www Redirect (Canonical Domain)
[[redirects]]
  from = "https://www.synclaro.de/*"
  to = "https://synclaro.de/:splat"
  status = 301
  force = true

# SEO: Sitemap Redirects (Astro SSR Mode)
[[redirects]]
  from = "/sitemap.xml"
  to = "/sitemap-index.xml"
  status = 200
  force = false

[[redirects]]
  from = "/sitemap-index.xml"
  to = "/sitemap-index.xml"
  status = 200
  force = false

[[redirects]]
  from = "/sitemap-0.xml"
  to = "/sitemap-0.xml"
  status = 200
  force = false

# Redirects
[[redirects]]
  from = "/mastermind"
  to = "/academy/mastermind"
  status = 301
  force = true

# SEO: Blog-URL-Fix (Prompt-Slug zu korrektem Slug)
# Nach DB-Update in Supabase (ouqhysemcldamthpuqqq) aktivieren
[[redirects]]
  from = "/blog/which-exact-keyword-should-the-title-target-if-the-keyword-is-e-rechnung-pflicht-2026-a-short-seo-friendly-title-could-be-e-rechnung-pflicht-2026-eingangsrechnungen-automatisieren"
  to = "/blog/e-rechnung-pflicht-2026"
  status = 301
  force = true

# Social Media Bio Links (Tracking)
[[redirects]]
  from = "/ig"
  to = "/lp/coaching?utm_source=instagram&utm_medium=bio&utm_campaign=organic"
  status = 301
  force = true

[[redirects]]
  from = "/tt"
  to = "/lp/coaching?utm_source=tiktok&utm_medium=bio&utm_campaign=organic"
  status = 301
  force = true

[[redirects]]
  from = "/mc"
  to = "/lp/coaching?utm_source=manychat&utm_medium=dm&utm_campaign=generic"
  status = 301
  force = true
