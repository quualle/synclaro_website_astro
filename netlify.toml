[build]
  command = "npm run build"
  publish = "dist"

[build.environment]
  NODE_VERSION = "20"

[functions]
  directory = ".netlify/functions"
  included_files = [".netlify/functions/**"]

# SEO: Sitemap Redirects (Astro SSR Mode)
[[redirects]]
  from = "/sitemap.xml"
  to = "/sitemap-index.xml"
  status = 200
  force = false

[[redirects]]
  from = "/sitemap-index.xml"
  to = "/sitemap-index.xml"
  status = 200
  force = false

[[redirects]]
  from = "/sitemap-0.xml"
  to = "/sitemap-0.xml"
  status = 200
  force = false

# Redirects
[[redirects]]
  from = "/mastermind"
  to = "/academy/mastermind"
  status = 301
  force = true

# Social Media Bio Links (Tracking)
[[redirects]]
  from = "/ig"
  to = "/lp/coaching?utm_source=instagram&utm_medium=bio&utm_campaign=organic"
  status = 301
  force = true

[[redirects]]
  from = "/tt"
  to = "/lp/coaching?utm_source=tiktok&utm_medium=bio&utm_campaign=organic"
  status = 301
  force = true

[[redirects]]
  from = "/mc"
  to = "/lp/coaching?utm_source=manychat&utm_medium=dm&utm_campaign=generic"
  status = 301
  force = true
